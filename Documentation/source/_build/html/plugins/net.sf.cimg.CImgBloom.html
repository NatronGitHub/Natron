

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bloom node &mdash; Natron 2.3.16 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Blur node" href="net.sf.cimg.CImgBlur.html" />
    <link rel="prev" title="AngleBlur node" href="fr.inria.AngleBlur.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Natron
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_group.html">Reference Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../_prefs.html">Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_environment.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupImage.html">Image nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupDraw.html">Draw nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupTime.html">Time nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupChannel.html">Channel nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupColor.html">Color nodes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_groupFilter.html">Filter nodes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="fr.inria.AngleBlur.html">AngleBlur node</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bloom node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inputs">Inputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#controls">Controls</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgBlur.html">Blur node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgChromaBlur.html">ChromaBlur node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.openfx.DenoiseSharpen.html">DenoiseSharpen node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgDilate.html">Dilate node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.openfx.DirBlur.html">DirBlur node</a></li>
<li class="toctree-l3"><a class="reference internal" href="eu.cimg.Distance.html">Distance node</a></li>
<li class="toctree-l3"><a class="reference internal" href="fr.inria.DropShadow.html">DropShadow node</a></li>
<li class="toctree-l3"><a class="reference internal" href="fr.inria.EdgeBlur.html">EdgeBlur node</a></li>
<li class="toctree-l3"><a class="reference internal" href="eu.cimg.EdgeDetect.html">EdgeDetect node</a></li>
<li class="toctree-l3"><a class="reference internal" href="eu.cimg.EdgeExtend.html">EdgeExtend node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgErode.html">Erode node</a></li>
<li class="toctree-l3"><a class="reference internal" href="eu.cimg.ErodeBlur.html">ErodeBlur node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgErodeSmooth.html">ErodeSmooth node</a></li>
<li class="toctree-l3"><a class="reference internal" href="fr.inria.Fill.html">Fill node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgExpression.html">GMICExpr node</a></li>
<li class="toctree-l3"><a class="reference internal" href="fr.inria.Glow.html">Glow node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.openfx.GodRays.html">GodRays node</a></li>
<li class="toctree-l3"><a class="reference internal" href="eu.cimg.Inpaint.html">Inpaint node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgLaplacian.html">Laplacian node</a></li>
<li class="toctree-l3"><a class="reference internal" href="eu.cimg.CImgMatrix3x3.html">Matrix3x3 node</a></li>
<li class="toctree-l3"><a class="reference internal" href="eu.cimg.CImgMatrix5x5.html">Matrix5x5 node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgMedian.html">Median node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.openfx.Shadertoy.html">Shadertoy node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgSharpen.html">Sharpen node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgSharpenInvDiff.html">SharpenInvDiff node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgSharpenShock.html">SharpenShock node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgSmooth.html">SmoothAnisotropic node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgBilateral.html">SmoothBilateral node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgBilateralGuided.html">SmoothBilateralGuided node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgGuided.html">SmoothGuided node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgDenoise.html">SmoothPatchBased node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgRollingGuidance.html">SmoothRollingGuidance node</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.sf.cimg.CImgSoften.html">Soften node</a></li>
<li class="toctree-l3"><a class="reference internal" href="fr.inria.ZMask.html">ZMask node</a></li>
<li class="toctree-l3"><a class="reference internal" href="fr.inria.ZRemap.html">ZRemap node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_groupKeyer.html">Keyer nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupMerge.html">Merge nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupTransform.html">Transform nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupViews.html">Views nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupOther.html">Other nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupGMIC.html">GMIC nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_groupExtra.html">Extra nodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devel/index.html">Developers Guide</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Natron</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../_group.html">Reference Guide</a> &raquo;</li>
        
          <li><a href="../_groupFilter.html">Filter nodes</a> &raquo;</li>
        
      <li>Bloom node</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/plugins/net.sf.cimg.CImgBloom.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bloom-node">
<span id="net-sf-cimg-cimgbloom"></span><h1>Bloom node<a class="headerlink" href="#bloom-node" title="Permalink to this headline">¶</a></h1>
<!-- Do not edit this file! It is generated automatically by Natron itself. --><p><a class="reference internal" href="../_images/net.sf.cimg.CImgBloom.png"><img alt="pluginIcon" src="../_images/net.sf.cimg.CImgBloom.png" style="width: 10.0%;" /></a></p>
<p><em>This documentation is for version 4.0 of Bloom (net.sf.cimg.CImgBloom).</em></p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Apply a Bloom filter (Kawase 2004) that sums multiple blur filters of different radii,</p>
<p>resulting in a larger but sharper glare than a simple blur.</p>
<p>It is similar to applying ‘Count’ separate Blur filters to the same input image with sizes ‘Size’, ‘Size’*‘Ratio’, ‘Size’*‘Ratio’^2, etc., and averaging the results.</p>
<p>The blur radii follow a geometric progression (of common ratio 2 in the original implementation, bloomRatio in this implementation), and a total of bloomCount blur kernels are summed up (bloomCount=5 in the original implementation, and the kernels are Gaussian).</p>
<p>The blur filter can be a quasi-Gaussian, a Gaussian, a box, a triangle or a quadratic filter.</p>
<p>Ref.: Masaki Kawase, “Practical Implementation of High Dynamic Range Rendering”, GDC 2004.</p>
<p>Uses the ‘vanvliet’ and ‘deriche’ functions from the CImg library.</p>
<p>CImg is a free, open-source library distributed under the CeCILL-C (close to the GNU LGPL) or CeCILL (compatible with the GNU GPL) licenses. It can be used in commercial applications (see <a class="reference external" href="http://cimg.eu">http://cimg.eu</a>).</p>
</div>
<div class="section" id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="42%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Input</th>
<th class="head">Description</th>
<th class="head">Optional</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Source</td>
<td>&#160;</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>Mask</td>
<td>&#160;</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="controls">
<h2>Controls<a class="headerlink" href="#controls" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="6%" />
<col width="1%" />
<col width="2%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter / script name</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Size / <code class="docutils literal notranslate"><span class="pre">size</span></code></td>
<td>Double</td>
<td>x: 0 y: 0</td>
<td>Size (diameter) of the filter kernel, in pixel units (&gt;=0). The standard deviation of the corresponding Gaussian is size/2.4. No filter is applied if size &lt; 1.2.</td>
</tr>
<tr class="row-odd"><td>Uniform / <code class="docutils literal notranslate"><span class="pre">uniform</span></code></td>
<td>Boolean</td>
<td>Off</td>
<td>Apply the same amount of blur on X and Y.</td>
</tr>
<tr class="row-even"><td>Ratio / <code class="docutils literal notranslate"><span class="pre">bloomRatio</span></code></td>
<td>Double</td>
<td>2</td>
<td>Ratio between successive kernel sizes of the bloom filter. A ratio of 1 gives no Bloom effect, just the original blur. A higher ratio gives a blur kernel with a heavier tail. The original implementation uses a value of 2.</td>
</tr>
<tr class="row-odd"><td>Count / <code class="docutils literal notranslate"><span class="pre">bloomCount</span></code></td>
<td>Integer</td>
<td>5</td>
<td>Number of blur kernels of the bloom filter. The original implementation uses a value of 5. Higher values give a wider of heavier tail (the size of the largest blur kernel is 2**bloomCount * size). A count of 1 is just the original blur.</td>
</tr>
<tr class="row-even"><td>Border Conditions / <code class="docutils literal notranslate"><span class="pre">boundary</span></code></td>
<td>Choice</td>
<td>Nearest</td>
<td><div class="first last line-block">
<div class="line">Specifies how pixel values are computed out of the image domain. This mostly affects values at the boundary of the image. If the image represents intensities, Nearest (Neumann) conditions should be used. If the image represents gradients or derivatives, Black (Dirichlet) boundary conditions should be used.</div>
<div class="line"><strong>Black (black)</strong>: Dirichlet boundary condition: pixel values out of the image domain are zero.</div>
<div class="line"><strong>Nearest (nearest)</strong>: Neumann boundary condition: pixel values out of the image domain are those of the closest pixel location in the image domain.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Filter / <code class="docutils literal notranslate"><span class="pre">filter</span></code></td>
<td>Choice</td>
<td>Quasi-Gaussian</td>
<td><div class="first last line-block">
<div class="line">Bluring filter. The quasi-Gaussian filter should be appropriate in most cases. The Gaussian filter is more isotropic (its impulse response has rotational symmetry), but slower.</div>
<div class="line"><strong>Quasi-Gaussian (quasigaussian)</strong>: Quasi-Gaussian filter (0-order recursive Deriche filter, faster) - IIR (infinite support / impulsional response).</div>
<div class="line"><strong>Gaussian (gaussian)</strong>: Gaussian filter (Van Vliet recursive Gaussian filter, more isotropic, slower) - IIR (infinite support / impulsional response).</div>
<div class="line"><strong>Box (box)</strong>: Box filter - FIR (finite support / impulsional response).</div>
<div class="line"><strong>Triangle (triangle)</strong>: Triangle/tent filter - FIR (finite support / impulsional response).</div>
<div class="line"><strong>Quadratic (quadratic)</strong>: Quadratic filter - FIR (finite support / impulsional response).</div>
</div>
</td>
</tr>
<tr class="row-even"><td>Expand RoD / <code class="docutils literal notranslate"><span class="pre">expandRoD</span></code></td>
<td>Boolean</td>
<td>Off</td>
<td>Expand the source region of definition by 1.5*size (3.6*sigma).</td>
</tr>
<tr class="row-odd"><td>Crop To Format / <code class="docutils literal notranslate"><span class="pre">cropToFormat</span></code></td>
<td>Boolean</td>
<td>On</td>
<td>If the source is inside the format and the effect extends it outside of the format, crop it to avoid unnecessary calculations. To avoid unwanted crops, only the borders that were inside of the format in the source clip will be cropped.</td>
</tr>
<tr class="row-even"><td>Alpha Threshold / <code class="docutils literal notranslate"><span class="pre">alphaThreshold</span></code></td>
<td>Double</td>
<td>0</td>
<td>If this value is non-zero, any alpha value below this is set to zero. This is only useful for IIR filters (Gaussian and Quasi-Gaussian), which may produce alpha values very close to zero due to arithmetic precision. Remind that, in theory, a black image with a single white pixel should produce non-zero values everywhere, but a few VFX tricks rely on the fact that alpha should be zero far from the alpha edges (e.g. the premult-blur-unpremult trick to fill holes)). A threshold value of 0.003 is reasonable, and values between 0.001 and 0.01 are usually enough to remove these artifacts.</td>
</tr>
<tr class="row-odd"><td>(Un)premult / <code class="docutils literal notranslate"><span class="pre">premult</span></code></td>
<td>Boolean</td>
<td>Off</td>
<td>Divide the image by the alpha channel before processing, and re-multiply it afterwards. Use if the input images are premultiplied.</td>
</tr>
<tr class="row-even"><td>Invert Mask / <code class="docutils literal notranslate"><span class="pre">maskInvert</span></code></td>
<td>Boolean</td>
<td>Off</td>
<td>When checked, the effect is fully applied where the mask is 0.</td>
</tr>
<tr class="row-odd"><td>Mix / <code class="docutils literal notranslate"><span class="pre">mix</span></code></td>
<td>Double</td>
<td>1</td>
<td>Mix factor between the original and the transformed image.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="net.sf.cimg.CImgBlur.html" class="btn btn-neutral float-right" title="Blur node" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fr.inria.AngleBlur.html" class="btn btn-neutral float-left" title="AngleBlur node" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2013-2020 The Natron documentation authors, licensed under CC BY-SA 4.0

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>