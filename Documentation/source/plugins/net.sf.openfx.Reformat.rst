.. _net.sf.openfx.Reformat:

Reformat node
=============

|pluginIcon| 

*This documentation is for version 1.1 of Reformat.*

Description
-----------

Convert the image to another format or size.

An image transform is computed that goes from the input format, regardless of the region of definition (RoD), to the selected format. The Resize Type parameter adjust the way the transform is computed.

The output format is set by this effect.

In order to set the output format without transforming the image content, use the NoOp effect.

This plugin concatenates transforms.

See also: http://opticalenquiry.com/nuke/index.php?title=Reformat

Inputs
------

+----------+---------------+------------+
| Input    | Description   | Optional   |
+==========+===============+============+
| Source   |               | No         |
+----------+---------------+------------+

Controls
--------

.. tabularcolumns:: |>{\raggedright}p{0.2\columnwidth}|>{\raggedright}p{0.06\columnwidth}|>{\raggedright}p{0.07\columnwidth}|p{0.63\columnwidth}|

.. cssclass:: longtable

+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Parameter / script name                | Type      | Default         | Function                                                                                                                                                                                                                                                                                                                                                           |
+========================================+===========+=================+====================================================================================================================================================================================================================================================================================================================================================================+
| Type / ``reformatType``                | Choice    | To Format       | To Format: Converts between formats, the image is resized to fit in the target format. To Box: Scales to fit into a box of a given width and height. Scale: Scales the image (rounding to integer pixel sizes).                                                                                                                                                    |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Format / ``NatronParamFormatChoice``   | Choice    | HD 1920x1080    | The output format                                                                                                                                                                                                                                                                                                                                                  |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Size / ``boxSize``                     | Integer   | x: 200 y: 200   | The output dimensions of the image in pixels.                                                                                                                                                                                                                                                                                                                      |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Force This Shape / ``boxFixed``        | Boolean   | Off             | If checked, the output image is cropped to this size. Else, image is resized according to the resize type but the whole image is kept.                                                                                                                                                                                                                             |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Pixel Aspect Ratio / ``boxPar``        | Double    | 1               | Output pixel aspect ratio.                                                                                                                                                                                                                                                                                                                                         |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Scale / ``reformatScale``              | Double    | x: 1 y: 1       | The scale factor to apply to the image. The scale factor is rounded slightly, so that the output image is an integer number of pixels in the direction chosen under resize type.                                                                                                                                                                                   |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Uniform / ``reformatScaleUniform``     | Boolean   | Off             | Use the X scale for both directions                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Resize Type / ``resize``               | Choice    | Width           | | Format: Converts between formats, the image is resized to fit in the target format. Size: Scales to fit into a box of a given width and height. Scale: Scales the image.                                                                                                                                                                                         |
|                                        |           |                 | | **None**: Do not resize the original.                                                                                                                                                                                                                                                                                                                            |
|                                        |           |                 | | **Width**: Scale the original so that its width fits the output width, while preserving the aspect ratio.                                                                                                                                                                                                                                                        |
|                                        |           |                 | | **Height**: Scale the original so that its height fits the output height, while preserving the aspect ratio.                                                                                                                                                                                                                                                     |
|                                        |           |                 | | **Fit**: Scale the original so that its smallest size fits the output width or height, while preserving the aspect ratio.                                                                                                                                                                                                                                        |
|                                        |           |                 | | **Fill**: Scale the original so that its longest size fits the output width or height, while preserving the aspect ratio.                                                                                                                                                                                                                                        |
|                                        |           |                 | | **Distort**: Scale the original so that both sides fit the output dimensions. This does not preserve the aspect ratio.                                                                                                                                                                                                                                           |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Center / ``reformatCentered``          | Boolean   | On              | Translate the center of the image to the center of the output. Otherwise, the lower left corner is left untouched.                                                                                                                                                                                                                                                 |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Flip / ``flip``                        | Boolean   | Off             | Mirror the image vertically.                                                                                                                                                                                                                                                                                                                                       |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Flop / ``flop``                        | Boolean   | Off             | Mirror the image horizontally.                                                                                                                                                                                                                                                                                                                                     |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Turn / ``turn``                        | Boolean   | Off             | Rotate the image by 90 degrees counter-clockwise.                                                                                                                                                                                                                                                                                                                  |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Preserve BBox / ``preserveBB``         | Boolean   | Off             | | If checked, preserve the whole image bounding box and concatenate transforms downstream.                                                                                                                                                                                                                                                                         |
|                                        |           |                 | | Normally, all pixels outside of the outside format are clipped off. If this is checked, the whole image RoD is kept.                                                                                                                                                                                                                                             |
|                                        |           |                 | | By default, transforms are only concatenated upstream, i.e. the image is rendered by this effect by concatenating upstream transforms (e.g. CornerPin, Transform...), and the original image is resampled only once. If checked, and there are concatenating transform effects downstream, the image is rendered by the last consecutive concatenating effect.   |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Filter / ``filter``                    | Choice    | Cubic           | | Filtering algorithm - some filters may produce values outside of the initial range (\*) or modify the values even if there is no movement (+).                                                                                                                                                                                                                   |
|                                        |           |                 | | **Impulse**: (nearest neighbor / box) Use original values                                                                                                                                                                                                                                                                                                        |
|                                        |           |                 | | **Bilinear**: (tent / triangle) Bilinear interpolation between original values                                                                                                                                                                                                                                                                                   |
|                                        |           |                 | | **Cubic**: (cubic spline) Some smoothing                                                                                                                                                                                                                                                                                                                         |
|                                        |           |                 | | **Keys**: (Catmull-Rom / Hermite spline) Some smoothing, plus minor sharpening (\*)                                                                                                                                                                                                                                                                              |
|                                        |           |                 | | **Simon**: Some smoothing, plus medium sharpening (\*)                                                                                                                                                                                                                                                                                                           |
|                                        |           |                 | | **Rifman**: Some smoothing, plus significant sharpening (\*)                                                                                                                                                                                                                                                                                                     |
|                                        |           |                 | | **Mitchell**: Some smoothing, plus blurring to hide pixelation (\*+)                                                                                                                                                                                                                                                                                             |
|                                        |           |                 | | **Parzen**: (cubic B-spline) Greatest smoothing of all filters (+)                                                                                                                                                                                                                                                                                               |
|                                        |           |                 | | **Notch**: Flat smoothing (which tends to hide moire' patterns) (+)                                                                                                                                                                                                                                                                                              |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Clamp / ``clamp``                      | Boolean   | Off             | Clamp filter output within the original range - useful to avoid negative values in mattes                                                                                                                                                                                                                                                                          |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Black outside / ``black_outside``      | Boolean   | Off             | Fill the area outside the source image with black                                                                                                                                                                                                                                                                                                                  |
+----------------------------------------+-----------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. |pluginIcon| image:: net.sf.openfx.Reformat.png
   :width: 10.0%
